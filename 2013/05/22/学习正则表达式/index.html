<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 学习正则表达式 · Esoft Mobile</title><meta name="description" content="学习正则表达式 - Tracy Yih"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://esoftmobile.com/atom.xml" title="Esoft Mobile"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/534072785" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/tracy-e" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">学习正则表达式</h1><div class="post-info">May 22, 2013</div><div class="post-content"><p><img src="/image/learn_regex.jpg" alt="Book"></p>
<p><strong>字符简写式</strong></p>
<table>
<thead>
<tr>
<th>字符简写式</th>
<th>描述</th>
<th>字符简写式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>报警符</td>
<td>\w</td>
<td>单词字符</td>
</tr>
<tr>
<td>[\b]</td>
<td>退格字符</td>
<td>\W</td>
<td>非单词字符</td>
</tr>
<tr>
<td>\c x</td>
<td>控制字符</td>
<td>\0</td>
<td>空字符</td>
</tr>
<tr>
<td>\d</td>
<td>数字字符</td>
<td>\x xx</td>
<td>字符的十六进制</td>
</tr>
<tr>
<td>\D</td>
<td>非数字字符</td>
<td>\u xxx</td>
<td>字符的Unicode值</td>
</tr>
<tr>
<td>\o xxx</td>
<td>字符的八进制</td>
</tr>
</tbody>
</table>
<a id="more"></a>
<p><strong>匹配各种空白符</strong></p>
<table>
<thead>
<tr>
<th>字符简写式</th>
<th>描述</th>
<th>字符简写式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\f</td>
<td>换页符</td>
<td>\s</td>
<td>空白符</td>
</tr>
<tr>
<td>\h</td>
<td>水平空白符</td>
<td>\S</td>
<td>非空白符</td>
</tr>
<tr>
<td>\H</td>
<td>非水平空白符</td>
<td>\t</td>
<td>水平制表符</td>
</tr>
<tr>
<td>\n</td>
<td>换行符</td>
<td>\v</td>
<td>垂直制表符</td>
</tr>
<tr>
<td>\r</td>
<td>回车符</td>
<td>\V</td>
<td>非垂直制表符</td>
</tr>
</tbody>
</table>
<p><strong>在sed中使用正则</strong></p>
<ul>
<li>替换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ echo Hello | sed s/Hello/Goodbye/</div><div class="line">//Goodbye</div></pre></td></tr></table></figure>
<ul>
<li>插入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sed &apos;s/^/&lt;h1&gt;/; s/$/&lt;\/h1&gt;/p; q&apos;</div><div class="line">Hello Sed</div><div class="line">//&lt;h1&gt;Hello Sed&lt;/h&gt;</div></pre></td></tr></table></figure>
<p><strong>在Perl中使用正则：</strong></p>
<ul>
<li>替换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ perl -ne &apos;s/Hello/Goodbye/; print&apos;</div><div class="line">Hello</div><div class="line">//Goodbye</div></pre></td></tr></table></figure>
<ul>
<li>插入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ perl -ne &apos;s/^/&lt;h1&gt;/; s/$/&lt;\/h1&gt;/m; print;&apos;</div><div class="line">Hello Perl</div><div class="line">//&lt;h1&gt;Hello Perl&lt;/h1&gt;</div></pre></td></tr></table></figure>
<p><strong>匹配元字符的字面值</strong></p>
<p>元字符：<code>.^$*+?|(){}[]\-</code></p>
<p>用<code>\Q$\E</code> 或 <code>\$</code>匹配</p>
<p><br><br><strong>正则表达式中的选项</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>描述</th>
<th>选项</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>(?d)</td>
<td>Unix中的行</td>
<td>(?i)</td>
<td>不区分大小写</td>
</tr>
<tr>
<td>(?J)</td>
<td>允许重复的名字</td>
<td>(?m)</td>
<td>多行</td>
</tr>
<tr>
<td>(?s)</td>
<td>单行（dotall）</td>
<td>(?u)</td>
<td>Unicode</td>
</tr>
<tr>
<td>(?U)</td>
<td>默认最短匹配</td>
<td>(?x)</td>
<td>忽略空格和注释</td>
</tr>
<tr>
<td>(?-…)</td>
<td>复原或关闭选项</td>
</tr>
</tbody>
</table>
<p><strong>Perl语言中的修饰符</strong></p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>匹配\d、\s、\w以及处于ASCII范围内的POSIX字符</td>
</tr>
<tr>
<td>c</td>
<td>匹配失败后停留在当前位置</td>
</tr>
<tr>
<td>d</td>
<td>使用默认的本地平台规则</td>
</tr>
<tr>
<td>g</td>
<td>全局匹配</td>
</tr>
<tr>
<td>i</td>
<td>不区分大小写</td>
</tr>
<tr>
<td>1</td>
<td>使用当前位置的规则</td>
</tr>
<tr>
<td>m</td>
<td>多行匹配</td>
</tr>
<tr>
<td>p</td>
<td>保留匹配的字符串</td>
</tr>
<tr>
<td>s</td>
<td>将字符串看做一行内容</td>
</tr>
<tr>
<td>u</td>
<td>匹配时使用Unicode规则</td>
</tr>
<tr>
<td>x</td>
<td>忽略空格及注释</td>
</tr>
</tbody>
</table>
<p><strong>POSIX字符组</strong></p>
<table>
<thead>
<tr>
<th>字符组</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>[[:alnum:]]</td>
<td>匹配字母及数字</td>
</tr>
<tr>
<td>[[:alpha:]]</td>
<td>匹配大小写字母</td>
</tr>
<tr>
<td>[[:ascii:]]</td>
<td>匹配ASCII字符</td>
</tr>
<tr>
<td>[[:space:]]</td>
<td>匹配空格和制表符</td>
</tr>
<tr>
<td>[[:blank:]]</td>
<td>匹配空格字符</td>
</tr>
<tr>
<td>[[:ctrl:]]</td>
<td>匹配控制字符</td>
</tr>
<tr>
<td>[[:digit:]]</td>
<td>匹配数字</td>
</tr>
<tr>
<td>[[:graph:]]</td>
<td>匹配图形字符</td>
</tr>
<tr>
<td>[[:lower:]]</td>
<td>匹配小写字母</td>
</tr>
<tr>
<td>[[:print:]]</td>
<td>匹配可打印字符</td>
</tr>
<tr>
<td>[[:punct:]]</td>
<td>匹配标点符号</td>
</tr>
<tr>
<td>[[:upper:]]</td>
<td>匹配大写字母</td>
</tr>
<tr>
<td>[[:word:]]</td>
<td>匹配单词字符</td>
</tr>
<tr>
<td>[[:xdigit:]]</td>
<td>匹配十六进制数字</td>
</tr>
<tr>
<td>[[:^alpha:]]</td>
<td>匹配非字母字符</td>
</tr>
</tbody>
</table>
<p><strong>Unicode</strong><br>中文：<code>[\u4e00-\u9fa5]</code></p>
<p><strong>量词</strong></p>
<table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>?</td>
<td>零个或一个（可选）</td>
<td>??</td>
<td>懒惰匹配零次或一次（可选）</td>
</tr>
<tr>
<td>+</td>
<td>一个或多个</td>
<td>+?</td>
<td>懒惰匹配一次或多次</td>
</tr>
<tr>
<td>*</td>
<td>零个或多个</td>
<td>*？</td>
<td>懒惰匹配零次或多次</td>
</tr>
<tr>
<td>{n}</td>
<td>精确匹配n次</td>
<td>{n}?懒惰匹配n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>匹配n次或更多次</td>
<td>{n,}</td>
<td>懒惰匹配n次或多次</td>
</tr>
<tr>
<td>{m,n}</td>
<td>匹配m至n次</td>
<td>{m,n}</td>
<td>懒惰匹配m至n次</td>
</tr>
<tr>
<td>{0,1}</td>
<td>与?相同</td>
</tr>
<tr>
<td>{1,}</td>
<td>与+相同</td>
</tr>
<tr>
<td>{0,}</td>
<td>与*相同</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>(?=exp)</td>
<td>正前瞻，匹配exp前的位置</td>
</tr>
<tr>
<td>(?!exp)</td>
<td>反前瞻，匹配后面不是exp的位置</td>
</tr>
<tr>
<td>(?&lt;=exp)</td>
<td>正后顾，匹配exp后面的位置</td>
</tr>
<tr>
<td>(?&lt;!exp)</td>
<td>反后顾，匹配前面不是exp的位置</td>
</tr>
</tbody>
</table>
<p>####Examples</p>
<p>国内电话号码：<br><code>^(\(\d{3}\))\d{8}|(\(\d{4}\))\d{7,8}|\d{3}-\d{8}|\d{4}-\d{7,8}$</code><br><br>(010)12345678、(0755)1234567、010-12345678、0755-1234567</p>
<p>电子邮箱：<br><code>[\w!#$%&amp;&#39;*+/=?^_`{|}~-]+(?:\.[\w!#$%&amp;&#39;*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?</code></p>
<hr>
<p>强烈推荐： <a href="http://www.oschina.net/question/12_9507" target="_blank" rel="external">《正则表达式30分钟入门教程》</a></p>
<p>至于图灵的<a href="http://www.ituring.com.cn/book/955" target="_blank" rel="external">《学习正则表达式》</a>，个人不建议买，里面的内容“30分钟”都有，如果想进一步学习正则表达式，推荐直接看《精通正则表达式（第3版）》或《正则表达式经典实例》。</p>
<p>另外推荐几款正则工具：</p>
<ol>
<li><a href="http://gskinner.com/RegExr/" target="_blank" rel="external">RegExr</a>，可通过浏览器使用，或者下载Windows或Mac版。</li>
<li><a href="http://reggyapp.com" target="_blank" rel="external">Reggy</a>，可选择不同的语言环境（PS：不同的语言环境下对正则的支持还是有细微的差别的）</li>
<li><a href="https://raw.github.com/tracy-e/Tools/master/RegexKitTool/RegexKitTool.dmg" target="_blank" rel="external">RegexKitTool</a>，笔者为了测试Cocoa下对正则的支持开发的一款Mac下的正则工具。</li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/2013/06/10/将uiwebview显示内容转为图片和pdf/" class="prev">上一篇</a><a href="/2013/05/21/《人月神话》书摘/" class="next">下一篇</a></div><div class="copyright"><p>© 2012 - 2017 <a href="http://esoftmobile.com">Tracy Yih</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>