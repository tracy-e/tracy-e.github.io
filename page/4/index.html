<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Esoft Mobile</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://esoftmobile.com/atom.xml" title="Esoft Mobile"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/534072785" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/tracy-e" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="https://shop461430871.taobao.com" target="_blank" class="nav-list-link">TAOBAO</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/11/ios7适配之设计篇/" class="post-title-link">iOS7适配之设计篇</a></h2><div class="post-info">Jun 11, 2013</div><div class="post-content"><p>（注：文章简要翻译自Apple <a href="https://developer.apple.com/library/prerelease/ios/documentation/UserExperience/Conceptual/TransitionGuide/TransitionGuide.pdf">《iOS 7 UI Transition Guide》</a>，由于该文档为开发者预览版，并非最终文档，所以iOS7正式上线可能有部分不同）</p>
<p>##准备工作<br>iOS7带来了很多界面上的改变，如：没有边框（圆角）的按钮，半透明的工具条（UINavigationBar, UIToolBar等），视图控制器的全屏布局等。使用Xcode5，你就可以创建iOS7工程，并在iOS7模拟器中看看iOS7的界面。</p>
<p><img src="/image/ios7_preview_ui_style.png" alt="UIStyle"></p>
<p>从iOS7系统应用的改变可以看出，iOS7这次改变不是小打小闹，是彻彻底底的变化。苹果认为之前的UI风格辨识度很高，但是视觉体验太不一致（comment:你们换个设计师，我们苦逼的程序员就得按照你的审美来修改、适配）。</p>
<blockquote>
<p>Note: 尽管iOS7所有的界面元素都看起来不一样，可能增加了新的功能，但是之前你所熟悉UIKit APIs的大多都是一样的。</p>
</blockquote></div><a href="/2013/06/11/ios7适配之设计篇/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/10/将uiwebview显示内容转为图片和pdf/" class="post-title-link">将UIWebView显示的内容转为图片和PDF</a></h2><div class="post-info">Jun 10, 2013</div><div class="post-content"><p>今天开发<a href="http://esoftmobile.com/evermark">Evermark</a>时要用到将UIWebView中显示的内容转为图片，方便转发到各个社交网络（Twitter,Facebook,Weibo），这样内容就不受长度限制，类似于<a href="http://www.changweibo.com">长微博</a>。 之前关于视图转图片我知道可以通过QuartzCore里截图的形式，但是截图只能截取当前屏幕所显示的区域(<code>UIGraphicsGetCurrentContext()</code>)，而UIWebView的内容可能比屏幕长得多，在网上搜了一下，没有找到更好的方法，所有只有将UIWebView分屏截取，然后将截取的图片拼接成一张图片。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">- (UIImage *)imageRepresentation&#123;</div><div class="line">    CGSize boundsSize = self.bounds.size;</div><div class="line">    CGFloat boundsWidth = self.bounds.size.width;</div><div class="line">    CGFloat boundsHeight = self.bounds.size.height;</div><div class="line">    </div><div class="line">    CGPoint offset = self.scrollView.contentOffset;</div><div class="line">    [self.scrollView setContentOffset:CGPointMake(0, 0)];</div><div class="line">    </div><div class="line">    CGFloat contentHeight = self.scrollView.contentSize.height;</div><div class="line">    NSMutableArray *images = [NSMutableArray array];</div><div class="line">    while (contentHeight &gt; 0) &#123;</div><div class="line">        UIGraphicsBeginImageContext(boundsSize);</div><div class="line">        [self.layer renderInContext:UIGraphicsGetCurrentContext()];</div><div class="line">        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">        UIGraphicsEndImageContext();</div><div class="line">        [images addObject:image];</div><div class="line">        </div><div class="line">        CGFloat offsetY = self.scrollView.contentOffset.y;</div><div class="line">        [self.scrollView setContentOffset:CGPointMake(0, offsetY + boundsHeight)];</div><div class="line">        contentHeight -= boundsHeight;</div><div class="line">    &#125;</div><div class="line">    [self.scrollView setContentOffset:offset];</div><div class="line">    </div><div class="line">    UIGraphicsBeginImageContext(self.scrollView.contentSize);</div><div class="line">    [images enumerateObjectsUsingBlock:^(UIImage *image, NSUInteger idx, BOOL *stop) &#123;</div><div class="line">        [image drawInRect:CGRectMake(0, boundsHeight * idx, boundsWidth, boundsHeight)];</div><div class="line">    &#125;];</div><div class="line">    UIImage *fullImage = UIGraphicsGetImageFromCurrentImageContext();</div><div class="line">    UIGraphicsEndImageContext();</div><div class="line">    return fullImage;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><a href="/2013/06/10/将uiwebview显示内容转为图片和pdf/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/05/22/学习正则表达式/" class="post-title-link">学习正则表达式</a></h2><div class="post-info">May 22, 2013</div><div class="post-content"><p><img src="/image/learn_regex.jpg" alt="Book"></p>
<p><strong>字符简写式</strong></p>
<table>
<thead>
<tr>
<th>字符简写式</th>
<th>描述</th>
<th>字符简写式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>报警符</td>
<td>\w</td>
<td>单词字符</td>
</tr>
<tr>
<td>[\b]</td>
<td>退格字符</td>
<td>\W</td>
<td>非单词字符</td>
</tr>
<tr>
<td>\c x</td>
<td>控制字符</td>
<td>\0</td>
<td>空字符</td>
</tr>
<tr>
<td>\d</td>
<td>数字字符</td>
<td>\x xx</td>
<td>字符的十六进制</td>
</tr>
<tr>
<td>\D</td>
<td>非数字字符</td>
<td>\u xxx</td>
<td>字符的Unicode值</td>
</tr>
<tr>
<td>\o xxx</td>
<td>字符的八进制</td>
</tr>
</tbody>
</table></div><a href="/2013/05/22/学习正则表达式/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/05/21/《人月神话》书摘/" class="post-title-link">《人月神话》书摘</a></h2><div class="post-info">May 21, 2013</div><div class="post-content"><h2 id="焦油坑"><a href="#焦油坑" class="headerlink" title="焦油坑"></a>焦油坑</h2><div class="borderblock"><br>1. 编程系统产品开发的工作量是供个人使用的、独立开发的构件程序的九倍。<br></div>

<div class="borderblock"><br>2. 编程行业的一些内在固有苦恼：<br><p><br>● 将做事方式调整到追求完美，是学习编程的最困难部分。<br></p><p><br>● 由其他人来设定目标，并且必须依靠自己无法控制的事物。<br></p><p><br>● 真正的权威来自于每次任务的完成。<br></p><p><br>● 任何创造性活动都伴随着枯燥艰苦的劳动，编程也不例外<br></p><p><br>● 人们通常期望项目在接近结束时（bug、工作时间）能收敛得快一些，然而软件项目的情况却是越接近完成，收敛得越慢。<br></p><p><br>● 产品在即将完成时总面临着陈旧过时的威胁。<br></p><br></div>

<h2 id="人月神话"><a href="#人月神话" class="headerlink" title="人月神话"></a>人月神话</h2><div class="borderblock"><br>1. 缺乏合理的时间进度是造成项目滞后的最主要原因，它比其他所有因素加起来影响还大。<br></div>

<div class="borderblock"><br>2. 良好的烹饪需要时间，某些任务无法在不损害结果的情况下加快速度。<br></div>

<div class="borderblock"><br>3. 我们的构思是有缺陷的，因此总会有bug。<br></div>

<div class="borderblock"><br>4. 我们围绕成本核算的估计技术，混淆了工作量和项目进展。人月是危险和带有欺骗性的神话，因为它暗示人员数量和时间是可以相互替换的。<br></div>

<div class="borderblock"><br>5. 在若干人员中分解任务会引发额外的沟通工作量——培训和相互沟通。<br></div></div><a href="/2013/05/21/《人月神话》书摘/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/05/21/os-x-commands/" class="post-title-link">OS X下常用的终端命令</a></h2><div class="post-info">May 21, 2013</div><div class="post-content"><ul>
<li>curl请求url列表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat urls.txt | xargs -P5 -n1 curl -O</div></pre></td></tr></table></figure>
<ul>
<li>远程拷贝：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp -r root@192.168.1.113:/private/var/mobile/Media/DICM /local/path</div></pre></td></tr></table></figure>
<ul>
<li>制作OS X启动盘</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo /Applications/Install\ OS\ X\ Mavericks.app/Contents/Resources/createinstallmedia --volume /Volumes/Untitled --applicationpath /Applications/Install\ OS\ X\ Mavericks.app --nointeraction</div></pre></td></tr></table></figure>
<ul>
<li>显示、隐藏隐藏文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">defaults write com.apple.finder AppleShowAllFiles -bool true/false</div><div class="line">KillAll Finder</div></pre></td></tr></table></figure>
<ul>
<li>查找程序或静态库是否用到了某个方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . | grep -v .svn  | grep &quot;\.a&quot; | grep -v &quot;\.app&quot; | xargs grep uniqueIdentifier</div></pre></td></tr></table></figure>
<ul>
<li>清理svn隐藏文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd [some path]</div><div class="line">find ./ -name &quot;.svn&quot; | xargs rm -Rf</div></pre></td></tr></table></figure>
<ul>
<li>静态库合并</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lipo -create libA.a libB.a -output libC.a</div></pre></td></tr></table></figure>
<ul>
<li>svn上传静态库（a包）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">svn add libxxx.a</div><div class="line">svn commit -m &quot;add static lib&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">open ~/.subversion/config</div><div class="line">[auto-props]</div><div class="line">global-ignores=.o .lo .la .al .libs .so .so.[0-9] .pyc .pyo .rej ~ ## .# ..swp .DS_Store .xcuserstate</div></pre></td></tr></table></figure>
<ul>
<li>svn版本合并</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">svn merge -r fromVersion:toVersion fromBencheLocalPath toBencheLocalPath</div><div class="line">（如：svn merge -r 26546:HEAD /Users/tracy/Documents/SVN/BOC/branches/P301 /Users/tracy/Documents/SVN/BOC/branches/P302）</div></pre></td></tr></table></figure></div><a href="/2013/05/21/os-x-commands/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/05/20/基于node.js的apns和passbook服务/" class="post-title-link">基于Node.js的APNS和Passbook服务</a></h2><div class="post-info">May 20, 2013</div><div class="post-content"><p>本文介绍iOS开发中常用到的两个服务APNS和Passbook基于Node.js实现的工具，虽然大部分公司可能目前不会选择Node.js开发后台，但对于广大iOS开发人员来说能够不依赖后台开发人员，自己写后台配合联调APNS或Passbook程序还是方便的多，甚至你可以在了解了一系列处理流程后指导一下后台开发人员完成开发，毕竟他们对苹果的服务不一定有你了解的多^_^。</p>
<h2 id="express"><a href="#express" class="headerlink" title="express"></a>express</h2><p>在正式介绍这两个工具之前，先简单的介绍一下<a href="http://expressjs.jser.us">express</a>，因为本文的Demo基于express框架。 Express是一个简洁灵活的node.js Web应用框架，它提供了一系列强大的特性帮助快速创建各种Web应用，有兴趣的可以进一步了解。本文demo中主要用到express中路由的管理和请求的封装。首先通过<code>npm install -g express</code>安装express包，安装完成后创建express应用<code>express --ejs MyService</code>，此时在当前目录下会创建一个MyService文件夹，里面有各种目录，编辑package.json文件，在dependencies中增加<code>apns</code>和<code>passbook</code>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"application-name"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.1"</span>,</div><div class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    <span class="attr">"start"</span>: <span class="string">"node app"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"dependencies"</span>: &#123;</div><div class="line">    <span class="attr">"express"</span>: <span class="string">"3.1.0"</span>,</div><div class="line">    <span class="attr">"mongodb"</span>: <span class="string">"1.2.14"</span>,</div><div class="line">    <span class="attr">"ejs"</span>: <span class="string">"*"</span>,</div><div class="line">    <span class="attr">"apns"</span>: <span class="string">"0.1.0"</span>,</div><div class="line">    <span class="attr">"passbook"</span>: <span class="string">"*"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><a href="/2013/05/20/基于node.js的apns和passbook服务/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2012/12/16/memory-managment/" class="post-title-link">iOS & OS X 内存管理</a></h2><div class="post-info">Dec 16, 2012</div><div class="post-content"><p>内存管理其实就是在需要的时候分配内存、使用、使用完后释放的过程。一个好的程序会尽可能的使用更少的内存资源。在Objective-C中对内存管理的原则是管理好对象的生命周期，在不再需要的时候释放，确保内存中没有多余的对象。</p>
<p>Objective-C中提供了两种内存管理方式：</p>
<ol>
<li>手动内存管理（<strong>MRR</strong>），也就是你需要精确的管理好自己所拥有的对象，这是用过引用计数系统来实现的，而引用计数的实现则是依赖NSObject类和运行时系统；</li>
<li>自动引用计数（<strong>ARC</strong>），和MRR一样也是依赖引用计数，不同的是编译器会在编译时自动插入合适的内存管理的方法。建议在新的项目组使用ARC，这样不仅可以省掉很多麻烦，也可以提升程序运行效率。</li>
</ol></div><a href="/2012/12/16/memory-managment/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2012/05/20/hello-hexo/" class="post-title-link">Hello Hexo</a></h2><div class="post-info">May 20, 2012</div><div class="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>从CSDN到博客园，然后从博客园到个人博客，也尝试过WordPress，但个人感觉使用和配置太麻烦，而且本人对PHP不感冒，所以一直在寻找一个简单一点的博客系统。之前个人也有想法自己用Node.js来实现一套，不需要那么花哨的功能，简单就好。在下手之前Google了一下“a Node.js blog”，搜到了Hexo， <a href="http://zespia.tw/hexo">Hexo</a> 是一个简单但功能强大的Node.js博客框架，通过简单的配置马上就能使用了，而且界面风格简约，正是我喜欢的博客。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>因为Hexo是基于Node.js实现的，所以在安装Hexo之前需要先安装 <a href="http://nodejs.org">Node.js</a>，安装完Node.js后， 就可以通过Node.js自带的npm(Node Packaged Modules)工具安装Hexo了。</p>
<h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><p><code>sudo npm install -g hexo</code></p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p><code>sudo npn update -g</code></p></div><a href="/2012/05/20/hello-hexo/" class="read-more">...more</a></article></li></ul></main><footer><div class="paginator"><a href="/page/3/" class="prev">PREV</a></div><div class="copyright"><p>© 2012 - 2017 <a href="http://esoftmobile.com">Tracy Yih</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>