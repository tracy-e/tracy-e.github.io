<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Esoft Mobile</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://esoftmobile.com/atom.xml" title="Esoft Mobile"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/534072785" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/tracy-e" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="https://shop461430871.taobao.com" target="_blank" class="nav-list-link">TAOBAO</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/08/22/web-notification/" class="post-title-link">Web Notification</a></h2><div class="post-info">Aug 22, 2013</div><div class="post-content"><p>在OS X 10.8 Mountain Lion系统上，通过Safari访问的页面能够发送通知到系统右边栏通知中心，通知（Notification）是通过WebKit <code>Notification</code> 对象发出的，这也是<a href="https://dvcs.w3.org/hg/notifications/raw-file/tip/Overview.html">W3C标准</a>实现的一部分。</p>
<p><img src="/image/notification_on_notificationCenter.png" alt="Notification Center"></p>
<p>来自Safari的通知可以在系统偏好设置的“通知”面板内进行设置，有些用户可能希望Safari的通知以提示框（alert）的形式在屏幕上停留一会儿然后再消失，有些人可能就不想在屏幕上显示。另外，用户可以在Safari偏好设置的通知面板内对单个网站（域名）的消息进行设定（Allow or Deny）。</p></div><a href="/2013/08/22/web-notification/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/08/17/effective-objective-c-2/" class="post-title-link">Effective Objective-C [下]</a></h2><div class="post-info">Aug 17, 2013</div><div class="post-content"><p>##Chapter 6: Blocks and Grand Central Dispatch</p>
<p>###Item 37: Understand Blocks</p>
<p><a href="http://rypress.com/tutorials/objective-c/blocks.html">《Ry’s Objective-C Tutorial》# Blocks</a></p>
<p>###Item 38: Create typedefs for Common Block Types</p>
<p>当我们程序中要使用一些具有共性的Block时（返回值类型、参数个数和类型相同），我们可以给这种Block定义一个类型：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="built_in">NSComparisonResult</span> (^<span class="built_in">NSComparator</span>)(<span class="keyword">id</span> obj1, <span class="keyword">id</span> obj2);</div><div class="line"><span class="comment">//...</span></div><div class="line">- (<span class="built_in">NSArray</span> *)sortedArrayUsingComparator:(<span class="built_in">NSComparator</span>)cmptr;</div><div class="line">- (<span class="keyword">void</span>)sortUsingComparator:(<span class="built_in">NSComparator</span>)cmptr;</div><div class="line"><span class="comment">//...</span></div></pre></td></tr></table></figure></div><a href="/2013/08/17/effective-objective-c-2/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/08/10/effective-objective-c/" class="post-title-link">Effective Objective-C [上]</a></h2><div class="post-info">Aug 10, 2013</div><div class="post-content"><blockquote>
<p>本文是针对<a href="http://www.effectiveobjectivec.com">《Effective Objective-C》</a>一书的代码解读，笔者并没有看过原书，只是通过阅读该书的<a href="https://github.com/effectiveobjc/code">代码</a>，并结合相应的主题，来臆测作者可能要表达的内容并用自己的语言来描述出来。</p>
</blockquote>
<h2 id="Chapter-1-Accustoming-Yourself-to-Objective-C"><a href="#Chapter-1-Accustoming-Yourself-to-Objective-C" class="headerlink" title="Chapter 1: Accustoming Yourself to Objective-C"></a>Chapter 1: Accustoming Yourself to Objective-C</h2><p>###Item 1: Familiarize Yourself with Objective-C’s Roots</p>
<p>###Item 2: Minimize Importing Headers in Headers<br>减少头文件中引入（<code>#import</code>）文件的数量，大部分情况下我们应该在头文件中用<code>@class</code>申明要引用的类，在实现文件中涉及到对该类的操作时才<code>#import</code>。</p></div><a href="/2013/08/10/effective-objective-c/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/07/26/clang-language-extensions/" class="post-title-link">Clang Language Extensions</a></h2><div class="post-info">Jul 26, 2013</div><div class="post-content"><p><img src="/image/clang_llvm_xcode.jpg" alt="Xcode"></p>
<blockquote>
<p>本文是自<a href="http://clang.llvm.org/docs/LanguageExtensions.html">《Clang Language Extensions》</a> 中选取部分与Objective-C相关的内容翻译，由于作者水平有限，如存在理解错误或翻译不到位的地方，还请指正！</p>
</blockquote></div><a href="/2013/07/26/clang-language-extensions/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/07/13/黑客与画家/" class="post-title-link">黑客与画家</a></h2><div class="post-info">Jul 13, 2013</div><div class="post-content"><p>##保罗·格雷厄姆其人其事</p>
<p>保罗·格雷厄姆有一套完整的创业哲学，他的创业公式是：  </p>
<ol>
<li>搭建原型</li>
<li>上线运营（别管bug）</li>
<li>收集反馈</li>
<li>调整产品</li>
<li>成长壮大</li>
</ol></div><a href="/2013/07/13/黑客与画家/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/27/为移动web应用创建快速响应按钮/" class="post-title-link">为移动Web应用创建快速响应按钮</a></h2><div class="post-info">Jun 27, 2013</div><div class="post-content"><blockquote>
<p>英文原文出自Google Deveploers<a href="https://developers.google.com/mobile/articles/fast_buttons">《Creating Fast Buttons for Mobile Web Applications》</a>，由<a href="http://weibo.com/534072785">TracyYih</a>翻译，并首发于EsoftMobile.com。如需转载，请注明译者及出处信息。</p>
</blockquote>
<p>##背景<br>在Google，我们不断地突破移动Web应用能够达到的效果，HTML5这类技术让原生应用和Web应用的界线开始变得模糊。为了这个目标，我们开发了一种新技术让纯HTML按钮能够有更快的响应。这之前，我们可能只是为按钮或者其他可以点击的元素增加点击处理，如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">'signUp()'</span>&gt;</span>Sign Up!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<p>使用这种方法存在一个问题就是，移动浏览器会在你点击按钮后300ms才触发事件，原因是浏览器需要区分你是否是要执行双击。但是对于大多数按钮，我们并不需要它处理双击事件，所以300ms的延时时间对于只是想执行点击事件的用户来说太长了。我们最早开发这种技术是在<a href="http://googlevoiceblog.blogspot.com/2010/01/google-voice-for-iphone-and-palm-webos.html">Google Voice mobile web app</a>中，我们希望能够更加迅速的调用拨号事件。</p>
<p>##处理触摸事件<br>该技术涉及一点JavaScript的东西来让按钮响应触摸（Touch）事件而不是点击（Click）事件。触摸事件响应不会有延时所以感受会比点击事件快很多，但是我们也需要考虑以下几个问题：</p>
<ol>
<li>如果用户是点击屏幕上其他的元素而触发了按钮的触摸事件，这种情况我们不应该去执行按钮的事件。</li>
<li>如果用户按下按钮然后拖到屏幕其他位置而触发了触摸事件，我们也不应该执行按钮的事件。</li>
<li>我们希望按钮在按下的时间能够高亮来表示点击状态。</li>
</ol></div><a href="/2013/06/27/为移动web应用创建快速响应按钮/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/23/ios7程序后台运行/" class="post-title-link">iOS7程序后台运行</a></h2><div class="post-info">Jun 23, 2013</div><div class="post-content"><p>##介绍##</p>
<p>这次iOS7对程序后台运行进行了加强，但是仅仅是加强而已，要想像Android程序那样自由当然就别想了，苹果这么做主要还是出于电池使用时间考虑，但是这次的加强对大部分程序基本够用。</p>
<p>在介绍之前， 我们先回顾一下在iOS7之前的后台运行相关的知识。在iOS7之前（iOS4之后）主要有三类的应用程序能够后台运行：</p>
<ol>
<li>音频播放</li>
<li>后台定位服务</li>
<li>IP电话</li>
</ol>
<p>除了这三种应用，其他程序只能是在进入后台之前向系统请求一个额外的运行时间（最长为10分钟），并在该时间内来进行后台运行操作，如保存用户信息，上传或下载数据，进行视频编码等操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (void)applicationDidEnterBackground:(UIApplication *)application</div><div class="line">&#123;</div><div class="line">	static UIBackgroundTaskIdentifier task;</div><div class="line">	task = [application beginBackgroundTaskWithExpirationHandler:^&#123;     task = UIBackgroundTaskInvalid; 	&#125;;</div><div class="line">	//执行后台操作	[application endBackgroundTask:task];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这次iOS7支持了两种新的程序后台运行模式：</p></div><a href="/2013/06/23/ios7程序后台运行/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/19/integrating-javascript-into-native-applications/" class="post-title-link">JavaScriptCore.framework</a></h2><div class="post-info">Jun 19, 2013</div><div class="post-content"><p>##JavaScriptCore简介</p>
<p>iOS7中新加入的JavaScriptCore.framework可能被大多数开发人员所忽略，但是如果你之前就在项目中用过自己编译<a href="https://github.com/tracy-e/JSEngine">JavaScriptCore</a>来处理JavaScript，那么你需要重新关注一下JavaScriptCore.framework。</p>
<p>JavaScriptCore是苹果Safari浏览器的JavaScript引擎，或许你之前听过Google的V8引擎，在WWDC上苹果演示了最新的Safari，据说JavaScript处理速度已经大大超越了Google的Chrome，这就意味着JavaScriptCore在性能上也不输V8了。</p>
<p>其实JavaScriptCore.framework在OS X平台上很早就存在的，不过接口都是纯C语言的，而在iOS平台，苹果没有开放该framework，所以不少需要在iOS app中处理JavaScript的都得自己从开源的WebKit中编译出JavaScriptCore.a，接口也是纯C语言的。可能是苹果发现越来越多的程序使用了自编译的JavaScriptCore，干脆做个顺水人情将JavaScriptCore.framework开放了，同时还提供了Objective-C的接口。</p>
<p>##Objetive-C -&gt; JavaScript</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@import JavaScriptCore;</div><div class="line"></div><div class="line">int main() &#123;</div><div class="line">	JSContext *context = [[JSContext alloc] init];</div><div class="line">	JSValue *result = [context evaluateScript:@&quot;2 + 2&quot;];</div><div class="line">	NSLog(@&quot;2 + 2 = %d&quot;, [result toInt32]);</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><a href="/2013/06/19/integrating-javascript-into-native-applications/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/19/convert-to-objective-c-arc/" class="post-title-link">Convert to Objective-C ARC</a></h2><div class="post-info">Jun 19, 2013</div><div class="post-content"><p>今天在进行代码走查时，竟然发现了下面这段代码：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; someObj.retainCount; i++) &#123;</div><div class="line">    [someObj release];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>顿时感觉吐槽无力，虽然我反复强调内存管理问题，无非就是谁申请谁释放，利用强弱引用避免retain-cycles，但是还是会有这样那样的问题，leaks每次就是一片红。本来是计划等他们交易都开发完了，进行一次集体代码走查，好好给他们上一课，集中来解决内存问题。但是由于个人原因我7月份会离开项目组，恐怕没有时间来这么做了，所以最终还是决定将工程转成ARC模式。  </p>
<p>该项目是某行手机银行客户端，iOS开发这块除了我，其他的所有7个开发人员都是项目组临时招聘的，技术参差不齐，毕竟公司招聘标准就是：便宜 + 能干事。我的职责就是负责客户端架构，公共机制的设计与实现，公共组件的封装，开发过程中的解疑。其他开发人员每人负责一两个模块的交易开发，其实无非就剩下请求数据绘界面的事了。</p>
<p>其实项目开始时就打算尝试用ARC的，但是项目组内其他人员之前都没接触过ARC，迫于项目进度压力也没有时间做培训，就使用大家比较熟悉的MRR，还是太信任他们了。</p></div><a href="/2013/06/19/convert-to-objective-c-arc/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2013/06/18/程序员的思维修炼/" class="post-title-link">程序员的思维修炼</a></h2><div class="post-info">Jun 18, 2013</div><div class="post-content"></div><a href="/2013/06/18/程序员的思维修炼/" class="read-more">...more</a></article></li></ul></main><footer><div class="paginator"><a href="/page/2/" class="prev">PREV</a><a href="/page/4/" class="next">NEXT</a></div><div class="copyright"><p>© 2012 - 2017 <a href="http://esoftmobile.com">Tracy Yih</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>